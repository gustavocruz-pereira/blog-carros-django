{% extends 'layout.html' %}
{% load static %}
{% load humanize %}
{% include '_header.html' %}
{% block sub_header %}
<section class="car-bg">
    <h1 class="logo">Dream's garage</h1>
</section>

  <div class="ultimos-artigos">
    <h2>Ultimos artigos:</h2>
  </div>
  
  <main class="corpo">
      {% for post in posts %}
        {% if post.published %}
          {% if forloop.counter <= 6 %}
            <div class="artigo">
              <div>
              <h2><a href="/post/{{post.pk}}">{{ post.title }}</a></h2>
              <a href="/post/{{post.pk}}"><img src="{{post.thumb.url}}"></a>
              {{ post.summary | safe }}
              <br>
              <p>{{post.created_at | naturalday}}</p>
              <br>
              <p class="ler-mais"><a href="/post/{{post.pk}}">Ler mais...</a></p>
              </div>
            </div>
            {% endif %}
          {% endif %}
      {% endfor %}

  </main>
  <h3 class="see-all-articles"><a href="{% url 'artigos' %}">VER TODOS OS ARTIGOS</a></h3>
  
  <section class="mercadoria">

    <h2 class="logo">Mercadorias</h2>
    <div class="slider">
      <div class="slider-tracker">
        {% for prod in produtos %}
          <div class="slide">
              <a href="{% url 'mercadorias' %}"><img src="{{prod.imagem_produto.url}}" alt=""></a>     
          </div>
          <br>
          <a href="{% url 'mercadorias' %}"><p class="desc-prod">{{prod.descr_produto}}</p></a>
        {% endfor %}
        {% for prod in produtos %}
          <div class="slide">
              <img src="{{prod.imagem_produto.url}}" alt="">
          </div>
        {% endfor %}
      </div>
  </div>
    <!--<div class="container">
      <button class="arrow-left" aria-label="Previous-image">ðŸ¢€</button>
      <button class="arrow-right" aria-label="Next-image">ðŸ¢‚</button>
      <div class="gallery-wrapper">
        <div class="gallery">
          <img src="{% static 'blog/img/caneca.webp' %}" alt="" class="item current-item">
          <img src="{% static 'blog/img/camisa.webp' %}" alt="" class="item">
          <img src="{% static 'blog/img/blusa.webp' %}"  alt="" class="item">
        </div>
      </div>
    </div>
    <script>
      const controls = document.querySelectorAll(".control");
      let currentItem = 0;
      const items = document.querySelectorAll(".item");
      const maxItems = items.length;

      controls.forEach((control) => {
          control.addEventListener("click", (e) => {
              isLeft = e.target.classList.contains("arrow-left");

              if (isLeft) {
                  currentItem -= 1;
              } else {
                  currentItem += 1;
              }

              if (currentItem >= maxItems) {
                  currentItem = 0;
              }

              if (currentItem < 0) {
                  currentItem = maxItems - 1;
              }

              items.forEach((item) => item.classList.remove("current-item"));

              items[currentItem].scrollIntoView({
                  behavior: "smooth",
                  inline: "center"
              });

              items[currentItem].classList.add("current-item");
          });
      });
    </script>
    <div class="mercadorias">
      {% for produto in produtos %}
        <div class="produtos">
          <h2>{{produto.nome_produto}}</h2>
          <img class="img-produto" src="{{produto.imagem_produto.url}}" alt="">
          <p>${{produto.preco_produto}}</p>
        </div>
      {% endfor %}
    </div>-->
  </section> 
{% endblock %}

